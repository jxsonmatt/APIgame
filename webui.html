<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>APIgame — Web UI</title>
    <style>
        :root{
            --bg:#0f1724; --card:#0b1220; --muted:#9aa4b2; --accent:#38bdf8; --success:#34d399;
            --glass: rgba(255,255,255,0.03);
            font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
        }
        html,body{height:100%;margin:0;background:linear-gradient(180deg,var(--bg),#071021);color:#e6eef6}
        .app{display:flex;flex-direction:column;height:100vh;padding:18px;gap:12px}
        header{display:flex;align-items:center;gap:12px}
        .brand{font-weight:700;font-size:18px;color:var(--accent)}
        .layout{display:flex;flex:1;gap:12px;min-height:0}
        .panel{background:linear-gradient(180deg,var(--card),var(--glass));border-radius:10px;padding:12px;box-shadow:0 6px 24px rgba(2,6,23,0.6);overflow:auto}
        .left{width:420px;display:flex;flex-direction:column;gap:10px}
        .right{flex:1;display:flex;flex-direction:column;gap:10px;min-width:0}
        label{font-size:12px;color:var(--muted);display:block;margin-bottom:6px}
        input[type=text],textarea,select{width:100%;padding:10px;border-radius:8px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:inherit;outline:none;resize:vertical;font-family:monospace}
        textarea{min-height:140px;max-height:320px}
        .row{display:flex;gap:8px}
        .btn{display:inline-flex;align-items:center;justify-content:center;gap:8px;padding:10px 12px;border-radius:8px;background:linear-gradient(90deg,var(--accent),#60a5fa);color:#022;cursor:pointer;border:none;font-weight:600}
        .btn.ghost{background:transparent;border:1px solid rgba(255,255,255,0.04);color:var(--muted)}
        .methods{display:flex;gap:6px;flex-wrap:wrap}
        .method{padding:6px 8px;border-radius:6px;border:1px solid rgba(255,255,255,0.03);background:transparent;color:var(--muted);cursor:pointer;font-weight:600}
        .method.active{background:rgba(56,189,248,0.12);border-color:rgba(56,189,248,0.2);color:var(--accent)}
        .response{font-family:monospace;background:#071422;padding:12px;border-radius:8px;white-space:pre-wrap;overflow:auto;max-height:100%}
        .status{font-weight:700;padding:6px 10px;border-radius:8px}
        .status.ok{background:rgba(52,211,153,0.12);color:var(--success)}
        .status.err{background:rgba(239,68,68,0.12);color:#fda4af}
        footer{font-size:12px;color:var(--muted);text-align:center}
        .small{font-size:13px;color:var(--muted)}
    </style>
</head>
<body>
    <div class="app">
        <header>
            <div class="brand">APIgame — Web UI</div>
            <div class="small">Lightweight interface for testing and exploring APIs</div>
        </header>

        <div class="layout">
            <div class="panel left">
                <div>
                    <label>Base URL</label>
                    <input id="baseUrl" type="text" placeholder="https://api.example.com" />
                </div>

                <div>
                    <label>Endpoint</label>
                    <input id="endpoint" type="text" placeholder="/v1/players" />
                </div>

                <div>
                    <label>Method</label>
                    <div class="methods" id="methods">
                        <button class="method active" data-method="GET">GET</button>
                        <button class="method" data-method="POST">POST</button>
                        <button class="method" data-method="PUT">PUT</button>
                        <button class="method" data-method="DELETE">DELETE</button>
                    </div>
                </div>

                <div>
                    <label>Headers (JSON)</label>
                    <textarea id="headers" placeholder='{"Content-Type":"application/json"}'></textarea>
                </div>

                <div>
                    <label>Body (JSON)</label>
                    <textarea id="body" placeholder='{"name":"Player1","score":100}'></textarea>
                </div>

                <div class="row">
                    <button class="btn" id="sendBtn">Send</button>
                    <button class="btn ghost" id="clearBtn">Clear</button>
                    <button class="btn ghost" id="presetBtn">Load Preset</button>
                </div>

                <div style="margin-top:8px" class="small">
                    Tips: Press Enter while focusing Base URL or Endpoint to send. Methods toggle quickly.
                </div>
            </div>

            <div class="panel right">
                <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:6px">
                    <div class="small">Response</div>
                    <div id="statusEl" class="status">Idle</div>
                </div>

                <div style="flex:1;min-height:0;display:flex;gap:10px">
                    <div style="flex:1;display:flex;flex-direction:column;gap:8px;min-width:0">
                        <label class="small">Raw</label>
                        <pre id="responseRaw" class="response">No response yet.</pre>
                    </div>

                    <div style="width:320px;display:flex;flex-direction:column;gap:8px">
                        <label class="small">Inspector / Log</label>
                        <div id="log" class="response" style="max-height:220px">Ready.</div>
                        <label class="small">Quick presets</label>
                        <div style="display:flex;gap:6px;flex-wrap:wrap">
                            <button class="method" data-preset='{"base":"https://jsonplaceholder.typicode.com","endpoint":"/posts/1","method":"GET","headers":"{}","body":""}'>Sample GET</button>
                            <button class="method" data-preset='{"base":"https://jsonplaceholder.typicode.com","endpoint":"/posts","method":"POST","headers":"{\"Content-Type\":\"application/json\"}","body":"{\"title\":\"foo\",\"body\":\"bar\",\"userId\":1}"}'>Sample POST</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <footer>Minimal UI — No telemetry. Built for quick API exploration.</footer>
    </div>

    <script>
        // Basic client-side UI logic
        const methodsEl = document.getElementById('methods');
        const methodButtons = methodsEl.querySelectorAll('.method');
        const headersEl = document.getElementById('headers');
        const bodyEl = document.getElementById('body');
        const baseUrlEl = document.getElementById('baseUrl');
        const endpointEl = document.getElementById('endpoint');
        const sendBtn = document.getElementById('sendBtn');
        const clearBtn = document.getElementById('clearBtn');
        const presetBtn = document.getElementById('presetBtn');
        const responseRaw = document.getElementById('responseRaw');
        const logEl = document.getElementById('log');
        const statusEl = document.getElementById('statusEl');

        function setActiveMethod(name){
            methodButtons.forEach(b=>{
                b.classList.toggle('active', b.dataset.method === name);
            });
        }

        methodsEl.addEventListener('click', e=>{
            const b = e.target.closest('.method');
            if(!b) return;
            setActiveMethod(b.dataset.method);
        });

        document.querySelectorAll('[data-preset]').forEach(btn=>{
            btn.addEventListener('click', ()=>{
                try{
                    const p = JSON.parse(btn.dataset.preset);
                    baseUrlEl.value = p.base || '';
                    endpointEl.value = p.endpoint || '';
                    setActiveMethod(p.method || 'GET');
                    headersEl.value = p.headers || '{}';
                    bodyEl.value = p.body || '';
                    log('Loaded preset');
                }catch(err){ log('Invalid preset'); }
            });
        });

        sendBtn.addEventListener('click', sendRequest);
        clearBtn.addEventListener('click', ()=>{ responseRaw.textContent='No response yet.'; statusEl.textContent='Idle'; log('Cleared response'); });
        presetBtn.addEventListener('click', ()=>{ baseUrlEl.value='https://api.example.com'; endpointEl.value='/v1/example'; headersEl.value='{}'; bodyEl.value=''; log('Preset filled'); });

        [baseUrlEl, endpointEl].forEach(el=>{
            el.addEventListener('keydown', e=>{
                if(e.key === 'Enter') sendRequest();
            });
        });

        function log(...args){
            const t = new Date().toLocaleTimeString();
            logEl.textContent = `${t} — ${args.join(' ')}\n` + logEl.textContent;
        }

        function getSelectedMethod(){
            return document.querySelector('.method.active')?.dataset.method || 'GET';
        }

        async function sendRequest(){
            const base = baseUrlEl.value.trim();
            const endpoint = endpointEl.value.trim();
            if(!base){ alert('Base URL required'); return; }
            const url = (base + '/' + endpoint).replace(/([^:]\/)\/+/g, '$1'); // normalize
            const method = getSelectedMethod();
            let headers = {};
            try{ headers = headersEl.value.trim() ? JSON.parse(headersEl.value) : {}; }catch(e){ alert('Invalid headers JSON'); return; }
            let body = null;
            if(method !== 'GET' && method !== 'HEAD'){
                const txt = bodyEl.value.trim();
                if(txt) {
                    try{ body = JSON.parse(txt); body = JSON.stringify(body); }catch(e){ alert('Body must be valid JSON'); return; }
                }
            }

            statusEl.textContent = 'Sending...';
            statusEl.className = 'status';
            log('Request ->', method, url);

            try{
                const res = await fetch(url, { method, headers, body });
                const ct = res.headers.get('content-type') || '';
                const raw = await res.text();
                let parsed = raw;
                if(ct.includes('application/json')){
                    try{ parsed = JSON.stringify(JSON.parse(raw), null, 2); }
                    catch(e){ /* keep raw */ }
                }
                responseRaw.textContent = parsed;
                statusEl.textContent = `${res.status} ${res.statusText}`;
                statusEl.className = 'status ' + (res.ok ? 'ok' : 'err');
                log(`Response ${res.status} (${res.ok ? 'OK' : 'ERROR'})`);
            }catch(err){
                responseRaw.textContent = String(err);
                statusEl.textContent = 'Network Error';
                statusEl.className = 'status err';
                log('Network error:', err.message || err);
            }
        }

        // small initial state
        headersEl.value = '{"Content-Type":"application/json"}';
        bodyEl.value = '{"example":"value"}';
    </script>
</body>
</html>